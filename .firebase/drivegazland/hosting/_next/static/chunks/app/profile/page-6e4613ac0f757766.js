(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{9385:function(e,s,t){Promise.resolve().then(t.bind(t,529))},529:function(e,s,t){"use strict";t.r(s);var a=t(7437),r=t(2265),l=t(8872);t(2392);var n=t(3390),i=t(263),d=t(7453),c=t(9842),o=t(4364),h=t(8592);s.default=(0,i.Z)(()=>{var e;let{user:s,loading:t}=(0,d.a)(),[i,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)([]),g=e=>e instanceof c.EK?e.toDate().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):e instanceof Date?e.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):"Date non disponible";return(0,r.useEffect)(()=>{(async()=>{(null==s?void 0:s.recentFiles)&&s.recentFiles.length>0&&x(await Promise.all(s.recentFiles.map(async e=>{let s=await (0,o.SH)(e);return{storagePath:e,url:s}})))})()},[s]),(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"bg-dark1 min-h-screen p-8 text-white",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white mb-6 font-title lg:ml-0 ml-6",children:"Mon Profil"}),(0,a.jsxs)("div",{className:"bg-dark2 p-4 rounded-lg shadow-md mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold font-title",children:"Infos du Profil"}),!t&&s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"mt-2 font-body",children:["Pseudonyme:"," ",(0,a.jsx)("span",{className:"text-greenPrimary",children:null==s?void 0:s.pseudonym})]}),(0,a.jsxs)("p",{className:"font-body",children:["Date de cr\xe9ation:"," ",(0,a.jsx)("span",{className:"text-greenPrimary",children:(null==s?void 0:s.creationDate)instanceof c.EK?g(null==s?void 0:null===(e=s.creationDate)||void 0===e?void 0:e.toDate()):(null==s?void 0:s.creationDate)instanceof Date?g(null==s?void 0:s.creationDate):"Date non disponible"})]}),(0,a.jsxs)("p",{className:"font-body",children:["Total de fichiers ajout\xe9s:"," ",(0,a.jsx)("span",{className:"text-greenPrimary",children:null==s?void 0:s.totalFileUploads})]})]}):(0,a.jsx)("p",{children:"Chargement des informations..."})]}),!t&&m.length>0&&(0,a.jsxs)("div",{className:"bg-dark2 p-4 rounded-lg shadow-md mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold font-title",children:"Fichiers r\xe9cemment ajout\xe9s"}),(0,a.jsx)("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:m.map((e,s)=>{var t,r;return(0,a.jsx)("div",{className:"bg-dark3 p-2 rounded-md shadow-md hover:shadow-lg transition-shadow duration-300",children:e.storagePath.includes("video")||e.storagePath.includes("mp4")?(0,a.jsx)("video",{src:null!==(t=e.url)&&void 0!==t?t:"",controls:!0,className:"w-full h-auto object-contain rounded-md"}):(0,a.jsx)(l.Z,{children:(0,a.jsx)("div",{className:"relative pb-[80%] bg-dark3 rounded-md overflow-hidden",children:(0,a.jsx)("img",{src:null!==(r=e.url)&&void 0!==r?r:"",alt:"Fichier r\xe9cent ".concat(s+1),className:"absolute top-0 left-0 w-full h-full object-cover rounded-md cursor-pointer"})})})},s)})})]}),!t&&(null==s?void 0:s.createdTags)&&s.createdTags.length>0&&(0,a.jsxs)("div",{className:"bg-dark2 p-4 rounded-lg shadow-md mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold font-title",children:"Tags"}),(0,a.jsxs)("p",{className:"font-body",children:["Nombre de tags:"," ",(0,a.jsx)("span",{className:"text-greenPrimary",children:s.createdTags.length})]}),(0,a.jsx)("button",{onClick:()=>u(!i),className:"mt-2 bg-greenPrimary text-white px-4 py-2 rounded-md hover:bg-green-600",children:"Afficher les Tags"}),i&&(0,a.jsx)("div",{className:"mt-4 flex flex-wrap",children:s.createdTags.slice().sort((e,s)=>e.localeCompare(s)).map((e,s)=>(0,a.jsx)("span",{className:"bg-greenPrimary text-white px-2 py-1 rounded-full mr-2 mb-2",children:e},s))})]}),(0,a.jsxs)("div",{className:"bg-dark2 p-4 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold font-title text-center",children:"Succ\xe8s"}),(0,a.jsx)("div",{className:"mt-4 flex flex-col items-center justify-center",children:(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 w-full max-w-5xl",children:h.N.map(e=>(0,a.jsxs)("div",{className:"bg-dark3 p-4 rounded-lg shadow-md flex flex-col items-center justify-center transition-shadow duration-300",children:[(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)("img",{src:Array.isArray(null==s?void 0:s.achievements)&&(null==s?void 0:s.achievements.includes(e.id))?"/images/success/".concat(e.id,".png"):"/images/success/locked.png",alt:e.name,className:"object-contain w-full h-40 sm:h-48 md:h-56 lg:h-64 xl:h-72 rounded-md mb-2"})}),e.description&&(0,a.jsx)("p",{className:"text-s text-gray-400 font-body text-center",children:e.name})]},e.id))})})]})]})})})},466:function(e,s,t){"use strict";t.d(s,{FilesProvider:function(){return d},Y:function(){return c}});var a=t(7437),r=t(2265),l=t(9842),n=t(3908);let i=(0,r.createContext)(void 0),d=e=>{let{children:s}=e,[t,d]=(0,r.useState)(0),[c,o]=(0,r.useState)(!0),[h,u]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=(0,l.hJ)(n.db,"linkedTags"),s=(0,l.cf)(e,e=>{u(e.docs.map(e=>({id:e.id,group:e.data().group,tags:e.data().tags})))});return()=>s()},[]),(0,r.useEffect)(()=>{let e=(0,l.cf)((0,l.hJ)(n.db,"files"),e=>{d(e.size),o(!1)},e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des fichiers en temps r\xe9el :",e)});return()=>e()},[]),(0,a.jsx)(i.Provider,{value:{totalFiles:t,loadingFiles:c,searchFilesByTags:(e,s)=>{if(0===e.length)return()=>{};try{let t=(0,l.hJ)(n.db,"files"),a=e.reduce((e,s)=>{let t=h.find(e=>e.tags.includes(s));if(t){let s=t.tags.filter(s=>!e.includes(s));return[...e,...s]}return e.includes(s)?e:[...e,s]},[]),r=(0,l.IO)(t,(0,l.ar)("tags","array-contains-any",a),(0,l.Xo)("createdAt","desc"));return(0,l.cf)(r,t=>{let a=t.docs.map(e=>({id:e.id,...e.data()})).filter(s=>e.every(e=>{let t=h.find(s=>s.tags.includes(e));return t?t.tags.some(e=>s.tags.includes(e)):s.tags.includes(e)}));s(a)})}catch(e){return console.error("Erreur lors de la recherche des fichiers en temps r\xe9el :",e),()=>{}}}},children:s})},c=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useFiles must be used within a FilesProvider");return e}},3390:function(e,s,t){"use strict";var a=t(7437),r=t(2265),l=t(6648),n=t(4589),i=t(842),d=t(5373),c=t(4413),o=t(4954),h=t(9651),u=t(6730),m=t(2103),x=t(6463),g=t(7453),f=t(8786),j=t(466);s.Z=e=>{let{children:s}=e,[t,p]=(0,r.useState)(!1),v=(0,x.useRouter)(),{logout:N}=(0,g.a)(),{totalTags:b}=(0,f.e)(),{totalFiles:y,loadingFiles:w}=(0,j.Y)(),{user:k}=(0,g.a)(),P=async()=>{try{await N(),v.push("/")}catch(e){console.error("Erreur lors de la d\xe9connexion\xa0:",e)}},C=()=>{v.push("/profile")},D=()=>{v.push("/audio")},E=()=>{p(!1)};return(0,r.useEffect)(()=>{t?document.body.style.overflow="hidden":document.body.style.overflow="auto"},[t]),(0,a.jsxs)("div",{className:"flex relative",children:[!t&&(0,a.jsx)("button",{className:"lg:hidden fixed top-8 left-4 z-50 text-white",onClick:()=>p(!t),children:(0,a.jsx)(n.Z,{className:"w-8 h-8"})}),t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30",onClick:E}),(0,a.jsx)("aside",{className:"fixed top-0 left-0 z-40 w-[75%] lg:w-[20%] h-screen bg-dark2 text-white transform ".concat(t?"translate-x-0":"-translate-x-full"," transition-transform duration-300 ease-in-out lg:translate-x-0"),children:(0,a.jsx)("div",{className:"flex flex-col h-full px-4 py-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-8 md:mb-12",children:(0,a.jsx)(l.default,{src:"/images/GazlandprojetDashboard.png",alt:"Logo",layout:"intrinsic",width:250,height:125,className:"h-6"})}),(0,a.jsxs)("ul",{className:"space-y-2 font-medium",children:[(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"/dashboard",className:"flex items-center p-2 text-gray-100 rounded-lg dark:text-white hover:bg-gray-700 hover:text-white transition duration-150 ease-in-out",onClick:E,children:[(0,a.jsx)(i.Z,{className:"w-6 h-6 text-gray-400 group-hover:text-white"}),(0,a.jsx)("span",{className:"ml-3",children:"Accueil"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"/audio",className:"flex items-center p-2 text-gray-100 rounded-lg dark:text-white hover:bg-gray-700 hover:text-white transition duration-150 ease-in-out",onClick:()=>{D(),E()},children:[(0,a.jsx)(d.Z,{className:"w-6 h-6 text-gray-400 group-hover:text-white"}),(0,a.jsx)("span",{className:"ml-3",children:"Audio"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"/ranking",className:"flex items-center p-2 text-gray-100 rounded-lg dark:text-white hover:bg-gray-700 hover:text-white transition duration-150 ease-in-out",onClick:()=>{v.push("/ranking")},children:[(0,a.jsx)(c.Z,{className:"w-6 h-6 text-gray-400 group-hover:text-white"}),(0,a.jsx)("span",{className:"ml-3",children:"Classement"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"/linked",className:"flex items-center p-2 text-gray-100 rounded-lg dark:text-white hover:bg-gray-700 hover:text-white transition duration-150 ease-in-out",onClick:E,children:[(0,a.jsx)(o.Z,{className:"w-6 h-6 text-gray-400 group-hover:text-white"}),(0,a.jsx)("span",{className:"ml-3",children:"Tags li\xe9s"})]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:"flex items-center p-2 text-gray-100 rounded-lg dark:text-white hover:bg-gray-700 hover:text-white transition duration-150 ease-in-out",onClick:()=>{C(),E()},children:[(0,a.jsx)(h.Z,{className:"w-6 h-6 text-gray-400 group-hover:text-white"}),(0,a.jsx)("span",{className:"ml-3",children:"Mon Profil"})]})})]}),(0,a.jsxs)("div",{className:"mt-8 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg bg-dark3",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(u.Z,{className:"w-6 h-6 me-2"}),"Tous les fichiers"]}),(0,a.jsx)("span",{className:"bg-gray-700 text-xs rounded-md px-2 py-1",children:y})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg bg-dark3",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(u.Z,{className:"w-6 h-6 me-2"}),"Tous les dossiers"]}),(0,a.jsx)("span",{className:"bg-gray-700 text-xs rounded-md px-2 py-1",children:b})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("button",{onClick:P,className:"flex items-center w-full p-2 rounded-lg hover:bg-gray-700 hover:text-white transition duration-150 ease-in-out",children:[(0,a.jsx)(m.Z,{className:"w-6 h-6 text-gray-400"}),(0,a.jsx)("span",{className:"ml-3",children:"D\xe9connexion"})]})})]})})}),(0,a.jsx)("div",{className:"flex-1 ml-0 lg:ml-[20%] ",children:s})]})}},263:function(e,s,t){"use strict";var a=t(7437),r=t(2265),l=t(6463),n=t(7453);s.Z=e=>s=>{let{user:t,loading:i}=(0,n.a)(),d=(0,l.useRouter)(),c=(0,l.usePathname)();return((0,r.useEffect)(()=>{i||(t?t.isValidated||"/account-validation"===c||d.push("/account-validation"):d.push("/"))},[t,i,d,c]),!i&&t&&(t.isValidated||"/account-validation"===c))?(0,a.jsx)(e,{...s}):null}}},function(e){e.O(0,[43,358,691,697,518,453,971,23,744],function(){return e(e.s=9385)}),_N_E=e.O()}]);