(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42],{2044:function(e,t,r){Promise.resolve().then(r.bind(r,6413))},6463:function(e,t,r){"use strict";var s=r(1169);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},6413:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var s=r(7437),a=r(2265),l=r(4768),n=r(3390),i=r(8786),o=r(3908),c=r(9842);let d=(0,c.hJ)(o.db,"linkedTags"),u=async(e,t)=>{try{return(await (0,c.ET)(d,{group:e,tags:t})).id}catch(e){throw console.error("Erreur lors de la cr\xe9ation du groupe de tags :",e),e}},h=async(e,t)=>{try{let r=(0,c.JU)(o.db,"linkedTags",e);await (0,c.r7)(r,{tags:(0,c.vr)(t)})}catch(e){throw console.error("Erreur lors de l'ajout du tag :",e),e}},g=async(e,t)=>{try{let r=(0,c.JU)(o.db,"linkedTags",e);await (0,c.r7)(r,{tags:(0,c.Ab)(t)});let s=(await (0,c.QT)(r)).data();s&&0===s.tags.length&&await x(e)}catch(e){throw console.error("Erreur lors du retrait du tag :",e),e}},x=async e=>{try{let t=(0,c.JU)(o.db,"linkedTags",e);await (0,c.oe)(t)}catch(e){throw console.error("Erreur lors de la suppression du groupe :",e),e}};var m=()=>{let[e,t]=(0,a.useState)([]),{linkedTags:r,tags:o,loadingTags:c,setLinkedTags:d}=(0,i.e)(),m=e=>r.some(t=>{var r;return(null==t?void 0:t.group)===e||(null==t?void 0:null===(r=t.tags)||void 0===r?void 0:r.includes(e))}),f=async(e,t)=>{try{if(!e){console.error("groupId is undefined or null");return}if(t===e){let t=r.filter(t=>t.id!==e);d(t),await x(e)}else{let s=r.map(r=>{if(r.id===e){let e=r.tags.filter(e=>e!==t);return{...r,tags:e}}return r});d(s),await g(e,t)}}catch(e){console.error("Erreur lors de la suppression du tag :",e)}},p=async(e,t)=>{try{let s=r.map(r=>r.id===e?{...r,tags:[...r.tags,t]}:r);d(s),await h(e,t)}catch(e){console.error("Erreur lors de l'ajout du tag :",e)}},v=async()=>{if(e.length>0)try{let s=await u(e[0],e);d([...r,{group:e[0],tags:e,id:s}]),t([])}catch(e){console.error("Erreur lors de la cr\xe9ation du groupe :",e)}},w=r=>{e.includes(r)||m(r)?alert('Le tag "'.concat(r,'" est d\xe9j\xe0 dans un autre groupe.')):t([...e,r])};return(0,s.jsx)(n.Z,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-dark1 p-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white mb-6 font-title lg:ml-0 ml-6",children:"Gestion des Tags Li\xe9s"}),c?(0,s.jsx)("p",{className:"text-white text-lg",children:"Chargement des tags li\xe9s..."}):(0,s.jsxs)("div",{className:"flex flex-wrap gap-8 justify-center lg:justify-start",children:[0===r.length?(0,s.jsx)("p",{className:"text-white",children:"Aucun groupe de tags li\xe9 n'est disponible."}):r.map(e=>{var t;return(0,s.jsxs)("div",{className:"bg-dark2 p-4 rounded-lg border-2 border-gray-600 w-64 flex flex-col justify-center items-center shadow-lg mx-auto",children:[(0,s.jsxs)("h2",{className:"text-greenPrimary font-subtitle text-xl mb-4 font-bold",children:["Groupe : ",e.group]}),(0,s.jsx)("div",{className:"flex flex-wrap justify-center",children:null==e?void 0:null===(t=e.tags)||void 0===t?void 0:t.map(t=>(0,s.jsx)(l.Z,{text:t,onRemove:()=>f(e.id,t)},t))}),(0,s.jsxs)("select",{className:"mt-4 bg-dark3 text-white px-4 py-2 rounded-lg w-full",onChange:t=>p(e.id,t.target.value),value:"",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Ajouter un tag"}),o.filter(t=>{var r;return!(null==e?void 0:null===(r=e.tags)||void 0===r?void 0:r.includes(t))&&!m(t)}).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]},e.id)}),(0,s.jsxs)("div",{className:"bg-dark2 p-4 rounded-lg border-2 border-gray-600 w-64 flex flex-col justify-center items-center shadow-lg mx-auto",children:[(0,s.jsx)("h2",{className:"text-greenPrimary font-subtitle text-xl mb-4",children:"Nouveau Groupe"}),(0,s.jsx)("div",{className:"flex flex-wrap justify-center",children:e.map(r=>(0,s.jsx)(l.Z,{text:r,onRemove:()=>t(e.filter(e=>e!==r))},r))}),(0,s.jsxs)("select",{className:"mt-4 bg-dark3 text-white px-4 py-2 rounded-lg w-full",onChange:e=>w(e.target.value),value:"",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:0===e.length?"Cr\xe9er un groupe":"Ajouter des tags"}),o.filter(t=>!e.includes(t)&&!m(t)).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsx)("button",{onClick:v,className:"mt-4 bg-greenPrimary text-white px-4 py-2 rounded-lg w-full",disabled:0===e.length,children:"Cr\xe9er le groupe"})]})]}),(0,s.jsxs)("div",{className:"mt-12 p-6 bg-dark2 border-2 border-gray-600 rounded-lg text-white",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-greenPrimary mb-4",children:"\xc0 quoi sert cette page Bot Casi ?"}),(0,s.jsx)("p",{className:"text-base mb-2",children:"Cette page vous permet de lier des tags entre eux pour simplifier la recherche. Lorsque des tags sont associ\xe9s dans un groupe, rechercher n'importe lequel de ces tags renverra \xe9galement les r\xe9sultats des autres tags li\xe9s."}),(0,s.jsxs)("p",{className:"text-base mb-2",children:["Par exemple, si vous liez les tags ",(0,s.jsx)("strong",{children:"2000"}),","," ",(0,s.jsx)("strong",{children:"Proplay"}),", et ",(0,s.jsx)("strong",{children:"LeFr\xe9reDeTh\xe9a"}),", rechercher ",(0,s.jsx)("strong",{children:"2000"})," affichera \xe9galement les fichiers avec les tags ",(0,s.jsx)("strong",{children:"Proplay"})," et"," ",(0,s.jsx)("strong",{children:"LeFr\xe9reDeTh\xe9a"}),". De la m\xeame mani\xe8re, rechercher"," ",(0,s.jsx)("strong",{children:"Proplay"})," ou ",(0,s.jsx)("strong",{children:"LeFr\xe9reDeTh\xe9a"})," renverra aussi les r\xe9sultats des autres tags li\xe9s."]}),(0,s.jsx)("p",{className:"text-base",children:"Vous pouvez cr\xe9er un nouveau groupe en s\xe9lectionnant des tags et les supprimer en retirant le premier tag du groupe."})]})]})})}},4768:function(e,t,r){"use strict";var s=r(7437);r(2265),t.Z=e=>{let{text:t,onRemove:r}=e;return(0,s.jsxs)("span",{className:"bg-greenPrimary text-white px-4 py-2 rounded-lg mr-2 mb-2 font-body flex items-center",children:[t,(0,s.jsx)("button",{onClick:r,className:"ml-4 text-black hover:text-red-500 text-2xl font-bold focus:outline-none",children:"\xd7"})]})}},466:function(e,t,r){"use strict";r.d(t,{FilesProvider:function(){return o},Y:function(){return c}});var s=r(7437),a=r(2265),l=r(9842),n=r(3908);let i=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,[r,o]=(0,a.useState)(0),[c,d]=(0,a.useState)(!0),[u,h]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=(0,l.hJ)(n.db,"linkedTags"),t=(0,l.cf)(e,e=>{h(e.docs.map(e=>({id:e.id,group:e.data().group,tags:e.data().tags})))});return()=>t()},[]),(0,a.useEffect)(()=>{let e=(0,l.cf)((0,l.hJ)(n.db,"files"),e=>{o(e.size),d(!1)},e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des fichiers en temps r\xe9el :",e)});return()=>e()},[]),(0,s.jsx)(i.Provider,{value:{totalFiles:r,loadingFiles:c,searchFilesByTags:(e,t)=>{if(0===e.length)return()=>{};try{let r=(0,l.hJ)(n.db,"files"),s=e.reduce((e,t)=>{let r=u.find(e=>e.tags.includes(t));if(r){let t=r.tags.filter(t=>!e.includes(t));return[...e,...t]}return e.includes(t)?e:[...e,t]},[]),a=(0,l.IO)(r,(0,l.ar)("tags","array-contains-any",s),(0,l.Xo)("createdAt","desc"));return(0,l.cf)(a,r=>{let s=r.docs.map(e=>({id:e.id,...e.data()})).filter(t=>e.every(e=>{let r=u.find(t=>t.tags.includes(e));return r?r.tags.some(e=>t.tags.includes(e)):t.tags.includes(e)}));t(s)})}catch(e){return console.error("Erreur lors de la recherche des fichiers en temps r\xe9el :",e),()=>{}}}},children:t})},c=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useFiles must be used within a FilesProvider");return e}},3390:function(e,t,r){"use strict";var s=r(7437),a=r(2265),l=r(6648),n=r(4589),i=r(842),o=r(4413),c=r(4954),d=r(9651),u=r(6730),h=r(2103),g=r(6463),x=r(7453),m=r(8786),f=r(466);t.Z=e=>{let{children:t}=e,[r,p]=(0,a.useState)(!1),v=(0,g.useRouter)(),{logout:w}=(0,x.a)(),{totalTags:j}=(0,m.e)(),{totalFiles:b,loadingFiles:y}=(0,f.Y)(),k=async()=>{try{await w(),v.push("/")}catch(e){console.error("Erreur lors de la d\xe9connexion\xa0:",e)}},N=()=>{v.push("/profile")},E=()=>{p(!1)};return(0,a.useEffect)(()=>{r?document.body.style.overflow="hidden":document.body.style.overflow="auto"},[r]),(0,s.jsxs)("div",{className:"flex relative",children:[!r&&(0,s.jsx)("button",{className:"lg:hidden fixed top-8 left-4 z-50 text-white",onClick:()=>p(!r),children:(0,s.jsx)(n.Z,{className:"w-8 h-8"})}),r&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30",onClick:E}),(0,s.jsx)("aside",{className:"fixed top-0 left-0 z-40 w-[75%] lg:w-[20%] h-screen bg-dark2 text-white transform ".concat(r?"translate-x-0":"-translate-x-full"," transition-transform duration-300 ease-in-out lg:translate-x-0"),children:(0,s.jsx)("div",{className:"flex flex-col h-full px-4 py-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center justify-center mb-8 md:mb-12",children:(0,s.jsx)(l.default,{src:"/images/GazlandprojetDashboard.png",alt:"Logo",layout:"intrinsic",width:250,height:125,className:"h-6"})}),(0,s.jsxs)("ul",{className:"space-y-2 font-medium",children:[(0,s.jsx)("li",{children:(0,s.jsxs)("a",{href:"/dashboard",className:"flex items-center p-2 text-gray-100 rounded-lg dark:text-white hover:bg-gray-700 hover:text-white transition duration-150 ease-in-out",onClick:E,children:[(0,s.jsx)(i.Z,{className:"w-6 h-6 text-gray-400 group-hover:text-white"}),(0,s.jsx)("span",{className:"ml-3",children:"Accueil"})]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("a",{href:"/ranking",className:"flex items-center p-2 text-gray-100 rounded-lg dark:text-white hover:bg-gray-700 hover:text-white transition duration-150 ease-in-out",onClick:()=>{v.push("/ranking")},children:[(0,s.jsx)(o.Z,{className:"w-6 h-6 text-gray-400 group-hover:text-white"}),(0,s.jsx)("span",{className:"ml-3",children:"Classement"})]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("a",{href:"/linked",className:"flex items-center p-2 text-gray-100 rounded-lg dark:text-white hover:bg-gray-700 hover:text-white transition duration-150 ease-in-out",onClick:E,children:[(0,s.jsx)(c.Z,{className:"w-6 h-6 text-gray-400 group-hover:text-white"}),(0,s.jsx)("span",{className:"ml-3",children:"Tags li\xe9s"})]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("a",{href:"#",className:"flex items-center p-2 text-gray-100 rounded-lg dark:text-white hover:bg-gray-700 hover:text-white transition duration-150 ease-in-out",onClick:()=>{N(),E()},children:[(0,s.jsx)(d.Z,{className:"w-6 h-6 text-gray-400 group-hover:text-white"}),(0,s.jsx)("span",{className:"ml-3",children:"Mon Profil"})]})})]}),(0,s.jsxs)("div",{className:"mt-8 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg bg-dark3",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(u.Z,{className:"w-6 h-6 me-2"}),"Tous les fichiers"]}),(0,s.jsx)("span",{className:"bg-gray-700 text-xs rounded-md px-2 py-1",children:b})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg bg-dark3",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(u.Z,{className:"w-6 h-6 me-2"}),"Tous les dossiers"]}),(0,s.jsx)("span",{className:"bg-gray-700 text-xs rounded-md px-2 py-1",children:j})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)("button",{onClick:k,className:"flex items-center w-full p-2 rounded-lg hover:bg-gray-700 hover:text-white transition duration-150 ease-in-out",children:[(0,s.jsx)(h.Z,{className:"w-6 h-6 text-gray-400"}),(0,s.jsx)("span",{className:"ml-3",children:"D\xe9connexion"})]})})]})})}),(0,s.jsx)("div",{className:"flex-1 ml-0 lg:ml-[20%] ",children:t})]})}},2103:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"}))});t.Z=a},4589:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))});t.Z=a},6730:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))});t.Z=a},842:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))});t.Z=a},4954:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))});t.Z=a},4413:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))});t.Z=a},9651:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});t.Z=a}},function(e){e.O(0,[358,691,697,453,971,23,744],function(){return e(e.s=2044)}),_N_E=e.O()}]);