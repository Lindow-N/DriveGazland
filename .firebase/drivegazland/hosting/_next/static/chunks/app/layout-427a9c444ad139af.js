(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9273:function(e,r,t){Promise.resolve().then(t.bind(t,3580)),Promise.resolve().then(t.t.bind(t,3054,23)),Promise.resolve().then(t.t.bind(t,4193,23)),Promise.resolve().then(t.bind(t,466)),Promise.resolve().then(t.bind(t,8786)),Promise.resolve().then(t.bind(t,7453))},6463:function(e,r,t){"use strict";var n=t(1169);t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})},466:function(e,r,t){"use strict";t.d(r,{FilesProvider:function(){return a},Y:function(){return c}});var n=t(7437),s=t(2265),i=t(9842),u=t(3908);let o=(0,s.createContext)(void 0),a=e=>{let{children:r}=e,[t,a]=(0,s.useState)(0),[c,d]=(0,s.useState)(!0),[l,f]=(0,s.useState)([]);return(0,s.useEffect)(()=>{let e=(0,i.hJ)(u.db,"linkedTags"),r=(0,i.cf)(e,e=>{f(e.docs.map(e=>({id:e.id,group:e.data().group,tags:e.data().tags})))});return()=>r()},[]),(0,s.useEffect)(()=>{let e=(0,i.cf)((0,i.hJ)(u.db,"files"),e=>{a(e.size),d(!1)},e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des fichiers en temps r\xe9el :",e)});return()=>e()},[]),(0,n.jsx)(o.Provider,{value:{totalFiles:t,loadingFiles:c,searchFilesByTags:(e,r)=>{if(0===e.length)return()=>{};try{let t=(0,i.hJ)(u.db,"files"),n=e.reduce((e,r)=>{let t=l.find(e=>e.tags.includes(r));if(t){let r=t.tags.filter(r=>!e.includes(r));return[...e,...r]}return e.includes(r)?e:[...e,r]},[]),s=(0,i.IO)(t,(0,i.ar)("tags","array-contains-any",n),(0,i.Xo)("createdAt","desc"));return(0,i.cf)(s,t=>{let n=t.docs.map(e=>({id:e.id,...e.data()})).filter(r=>e.every(e=>{let t=l.find(r=>r.tags.includes(e));return t?t.tags.some(e=>r.tags.includes(e)):r.tags.includes(e)}));r(n)})}catch(e){return console.error("Erreur lors de la recherche des fichiers en temps r\xe9el :",e),()=>{}}}},children:r})},c=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useFiles must be used within a FilesProvider");return e}},4193:function(){},3054:function(){}},function(e){e.O(0,[811,358,691,697,453,971,23,744],function(){return e(e.s=9273)}),_N_E=e.O()}]);